# Servicio gRPC de PredicciÃ³n de Vinos

Este proyecto implementa un servicio gRPC para predicciÃ³n de calidad de vinos utilizando Docker y Python.

## ğŸ“ Estructura del Proyecto

```
GRP/
â”œâ”€â”€ docker/
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â”œâ”€â”€ buildAll.sh
â”‚   â”œâ”€â”€ runAll.sh
â”‚   â””â”€â”€ stopAll.sh
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ grp_app.py
â”‚   â”œâ”€â”€ test_client.py
â”‚   â”œâ”€â”€ wine_service.proto
â”‚   â”œâ”€â”€ wine_service_pb2.py
â”‚   â””â”€â”€ wine_service_pb2_grpc.py
â””â”€â”€ models/
    â””â”€â”€ random_forest_model.pkl
```

## ğŸ› ï¸ Requisitos

- Docker
- Python 3.10+
- Modelo entrenado (`random_forest_model.pkl`)

## ğŸš€ ConfiguraciÃ³n y Despliegue

### 1. ConstrucciÃ³n de la Imagen Docker

```bash
# Desde la raÃ­z del proyecto
docker build -t microservicio-grpc:1.0 -f docker/Dockerfile .
```

### 2. EjecuciÃ³n del Contenedor

```bash
docker run -d \
    --name wine-predictor \
    -p 50051:50051 \
    -v "$(pwd)/models:/app/models" \
    -e GRPC_PORT=50051 \
    -e MODEL_PATH=/app/models/random_forest_model.pkl \
    microservicio-grpc:1.0
```

### 3. Detener el Contenedor

```bash
docker stop wine-predictor
docker rm wine-predictor
```

## ğŸ“¦ Dependencias Principales

```text
grpcio==1.54.2
grpcio-tools==1.54.2
numpy==1.24.3
scikit-learn==1.2.2
joblib==1.2.0
```

## ğŸ”§ Variables de Entorno

- `GRPC_PORT`: Puerto para el servicio gRPC (default: 50051)
- `MODEL_PATH`: Ruta al modelo serializado (default: /app/models/random_forest_model.pkl)
- `PYTHONUNBUFFERED`: ConfiguraciÃ³n para logs de Python

## ğŸŒŸ CaracterÃ­sticas del Servicio

- PredicciÃ³n de calidad de vinos basada en caracterÃ­sticas quÃ­micas
- Endpoint de health check para monitoreo
- Manejo de errores robusto
- Escalable y containerizado

## ğŸ“ Uso del Servicio

1. AsegÃºrate de tener el modelo en la carpeta correcta:
```bash
mkdir -p models
# Coloca tu modelo random_forest_model.pkl en la carpeta models
```

2. Construir e iniciar el servicio:
```bash
# Desde la raÃ­z del proyecto
docker build -t microservicio-grpc:1.0 -f docker/Dockerfile .
docker run -d --name wine-predictor -p 50051:50051 -v "$(pwd)/models:/app/models" microservicio-grpc:1.0
```

3. Probar el servicio:
```bash
cd src
python test_client.py
```

4. Detener el servicio:
```bash
docker stop wine-predictor
docker rm wine-predictor
```

## ğŸ” Monitoreo

El servicio incluye un endpoint de health check que puede ser consultado para verificar:
- Estado del servicio
- Carga del modelo
- Mensajes de estado

## âš ï¸ Consideraciones

- AsegÃºrate de que el modelo estÃ© disponible en la ruta especificada
- El puerto 50051 debe estar disponible en el host
- Los permisos de ejecuciÃ³n deben estar configurados para los scripts .sh
```
